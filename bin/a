#!/usr/bin/env rc

# source .env

dotenvs=()
cwd=`{pwd}

while(~ $cwd /home/*){
    if(test -f $cwd/.env) dotenvs=($cwd/.env $dotenvs)
    cwd=`{dirname $cwd}
}

for(f in $dotenvs){
    echo 'Sourcing '$f
    . $f
}

wd=`{pwd}
cd

# start acme with project dump

dumpfile=$wd/data/acme.dump

if(test -f $dumpfile){
    echo 'Loading existing '$dumpfile
    acme+ -l $dumpfile
}
if not{
    echo 'Creating new '$dumpfile
    mkdir -p $wd/data
    cat <<! > $dumpfile
    acme+ -l $dumpfile
}
/home/lo
/mnt/font/IntelOneMono-Regular/10a/font
/mnt/font/FiraCode-Retina/10a/font
  0.0000000  30.0000000  70.0000000
w Newcol Kill Putall [Dump $dumpfile] Exit $wd Putall Tickets >ticket s/bin touch
c          0 New Cut Paste Snarf Sort Zerox Delcol
c          1 New Cut Paste Snarf Sort Zerox Delcol
c          2 New Cut Paste Snarf Sort Zerox Delcol
!
